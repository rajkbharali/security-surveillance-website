<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>
<link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css"
rel = "stylesheet">
<script src="https://static.anychart.com/js/8.0.1/anychart-core.min.js"></script>
<script src="https://static.anychart.com/js/8.0.1/anychart-pie.min.js"></script>
<script src = "https://code.jquery.com/jquery-1.10.2.js"></script>
<script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"><title>Dashboard</title>
<style type="text/css">
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  line-height: 1.42857143;
  color: #333;
  background-color: #fff;
  font-size: 14px;
  background-color: #fff;
}
/*Resize the wrap to see the search bar change!*/
/*End Search bar*/
/* Navbar Style Start */
.navbar {
  overflow: hidden;
  background-color: #3c8dbc;
  height: 35px;
  margin-top: -5px;

}
.navbar a {
  float: left;
  font-size: 16px;
  color: white;
  text-align: center;
  padding: 10px 12px;
  text-decoration: none;
}
/* Navbar End */
/*nav bar color*/
.navcolor
{
    color: #fff!important;
    background-color: #333; 
}
.w3-dropdown-content {
    cursor: auto;
    color: #fff;
    background-color: #333;
    position: absolute;
    margin: 0;
    padding: 0;
    z-index: 1;
}
/* end nav bar color */
/* drop down style*/
.st
{
    display: block;
    padding: .375rem .75rem;
    font-size: 1rem;
    line-height: 1.5;
    color: #495057;
    background-color: #fff;
    background-clip: padding-box;
    border: 1px solid #ced4da;
    border-radius: .25rem;
    transition: border-color .15s ease-in-out,box-shadow .15s ease-in-out;
}
/*drop down validate*/
label.error
{
color:red;
font-family:verdana, Helvetica;
}
/*end drop down validator*/
/* Responsive layout - makes the three columns stack on top of each other instead of next to each other */

@media screen and (max-width: 600px) {
  .column {
    width: auto;
    height: auto;
  }
}
@media screen and (max-width: 455px) {
    .h3 {
        font-size:16px;
    }
}
</style>
</head>
<body>  
<div class="w3-sidebar navcolor  w3-card-4 w3-animate-left" style="width:200px" id="mySidebar">
<div class="w3-bar w3-dark-grey">
<span class="w3-bar-item w3-padding-16"></span>
<button onclick="w3_close()"
class="w3-bar-item w3-button w3-right w3-padding-16" title="close Sidebar">&times;
</button>
</div>
<div class="w3-bar-block">
<div class="w3-dropdown-hover">
<a class="w3-button" href="javascript:void(0)">Setting <i class="fa fa-caret-down">
</i></a>
<div class="w3-dropdown-content w3-bar-block w3-card-4">
<a class="w3-bar-item w3-button" href="/display">Camera Management</a>
<a class="w3-bar-item w3-button" href="/settings">Advanced Settings</a>
</div>
</div>
<div class="w3-dropdown-hover">
<a class="w3-button" href="javascript:void(0)">Data Management <i class="fa fa-caret-down"></i></a>
<div class="w3-dropdown-content w3-bar-block w3-card-4">
<a class="w3-bar-item w3-button" href="/safelist">Safe List</a>
<a class="w3-bar-item w3-button" href="/threatlist">Unsafe List</a>
<a class="w3-bar-item w3-button" href="/unknownlist">Unknown List</a>
</div>
</div>
<div class="w3-dropdown-hover">
<a class="w3-button" href="{{url_for('chart')}}">Chart</a>
</div>
</div>
</div>
<div id="main" style="margin-left:200px">
<div class="w3-container w3-display-container">
<span title="open Sidebar" style="display:none" id="openNav" class="w3-button w3-transparent w3-display-topleft w3-xlarge" onclick="w3_open()">&#9776;</span>
<!--End Nav-Bar-->  
<div class="container">
<div class="row">
<!-------- Bar Chart----------->
  <div class="col-6" style="width: 100%;">
  <div class="row">
  &emsp;<p style="margin-top: 12px;">Known Unknown Total Person Report</p>
  &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;
      <form action="{{url_for('chart')}}" method="POST" id="barform">
      </div>
      <div class="row">
      &emsp;<select required="True" class="select2 st" style="height: 30px;" name="drop1" size="1">
      <option selected="selected" value=''>select camera</option>
      {% for i in pcam %} 
      <option value="{{i}}">{{i}}</option>
      {% endfor %}
      </select>
      <p style="margin-left:15px; ">Start Date:</p><input class="form-control" style="width: 15%;height: 30px;" name="start" id ="from"/ required="True">
      <p style="margin-left:15px; ">End Date:</p><input class="form-control" style="width: 15%;height: 30px;" name="end" id="to" required="True">
      &emsp;
      <input type="submit" style="color:#fff;background-color:#007bff;border-color: #007bff;height: 25px;" value="submit" id="barsubmit">
      </div>
      </form>
  <div id="bar"></div>
  </div>
<!---------End Bar Chart------------>


<!------Line Chart---------->
<div class="col-6" style="width: 100%;">
<div class="row">
&emsp;&emsp;<p style="margin-top: 12px;">Gender Trending Report</p>
</div>
  <form action="{{url_for('chart')}}" id="lineform" method="POST">
  <div class="row">
  &emsp;  
  <select class="select2 st" style="height: 30px;" name="drop2" id="safe" size="1" required="True">
  <option selected="selected" value="">select camera</option>
  {% for i in pcam %} 
  <option value="{{i}}">{{i}}</option>
  {% endfor %}
  </select>

  <p style="margin-left:15px; ">Start Date:</p><input class="form-control" style="width: 12%;height: 30px;" name="start" id ="lfrom"/ required="True">
  
  <p style="margin-left:15px; ">End Date:</p><input class="form-control" style="width: 12%;height: 30px;" name="end" id="lto" required="True">
  &emsp;

  <input type="submit" style="color:#fff;background-color:#007bff;border-color: #007bff; height: 25px;" value="submit" id="linesubmit">
  </div>
  </form>
<div id="linechart"></div>
</div>
</div>
<!-------End Line Chart------------------->


<!---------Gender Pie Chart---------------------------->
<div class="row">
<div class="col-6" style="width: 100%;">
<div class="row">
&ensp;
<p style="margin-top: 12px;">Gender Report</p>
</div>
  <form action="{{url_for('chart')}}" method="POST" id="genderform" >
  <div class="row">  
  &emsp;
  <select class="select2 st" style="height: 30px;" name="loc" id="location" size="1" required="True">
  <option selected="selected" value="">select location</option>
  {% for i in ploc %} 
  <option value="{{i}}">{{i}}</option>
  {% endfor %}
  </select>
  &emsp; 
  <select class="select2 st" style="height: 30px;" name="cam" id="camera" size="1" required="True">
  <option selected="selected" value="">select camera</option>
  {% for i in pcam %} 
  <option value="{{i}}">{{i}}</option>
  {% endfor %}
  </select>
  &emsp; 
  <input type="submit" style="color:#fff;background-color:#007bff;border-color: #007bff; height: 25px;" value="submit" id="gendersubmit">
  </div>
  </form>

<div id="container" style="width:100%;height:150%">
</div>
</div>
<!---------- Gender chart End----------->


<!------Age Pie Chart---------->
<div class="col-6" style="width:100%">
<div class="row">
&emsp;&emsp;&emsp;
<p style="margin-top: 12px;">Age Report</p>
</div>
  <form action="{{url_for('chart')}}" method="POST" id="ageform" >
  <div class="row">
  &emsp;&emsp;&emsp;
  <select class="select2 st" style="height: 30px;" name="aloc" id="location" size="1" required="True">
  <option selected="selected" value="">select location</option>
  {% for i in ploc %} 
  <option value="{{i}}">{{i}}</option>
  {% endfor %}
  </select>
  &emsp; 
  <select class="select2 st" style="height: 30px;" name="acam" id="camera" size="1" required="True">
  <option selected="selected" value="">select camera</option>
  {% for i in pcam %} 
  <option value="{{i}}">{{i}}</option>
  {% endfor %}
  </select>
  &emsp; 
  <input type="submit" style="color:#fff;background-color:#007bff;border-color: #007bff; height: 25px;" value="submit" id="agesubmit">
  </div>
  </form>
<div id="acontainer" style="width:100%;height:150%" ></div>
</div>
</div>
<!------------------------------------------------------->
</div>
</body>
</html>
<script type="text/javascript">
// Bar Chart Here
Morris.Bar({
          element: 'bar',
          data: [
          {% if a['labels']|length == a['total']|length == a['known']|length == a['unknown']|length %}
          {% for i in range(a['total']|length) %} 
          { y: '{{a['labels'][i]}}', a:'{{a['known'][i]}}', b:'{{a['unknown'][i]}}', 
          c:'{{a['total'][i]}}' },
          {% endfor %}
          {% endif %}],
          xkey: ['y'],
          ykeys: ['c', 'a', 'b'],
          labels: [ 'Total','Known', 'Unknown']
          });
//////////// Calender
$(function(){
  $("#to").datepicker({ dateFormat: 'dd-mm-yy' });
  $("#from").datepicker({ dateFormat: 'dd-mm-yy' }).bind("change",function(){
    var minValue = $(this).val();
    minValue = $.datepicker.parseDate("dd-mm-yy", minValue);
    minValue.setDate(minValue.getDate()+1);
    $("#to").datepicker( "option", "minDate", minValue );
  })
});
        
//////////////////////////// Line Chart Here
Morris.Line({
// ID of the element in which to draw the chart.
element: 'linechart',
// Chart data records -- each entry in this array corresponds to a point on
// the chart.
data: [
    {% if data['date']|length == data['person']|length == data['male']|length == data['female']|length %}
    {% for i in range(data['person']|length) %} 
    { d: '{{data['date'][i]}}',male:'{{data['male'][i]}}',female:'{{data['female'][i]}}'},
    {% endfor %}
    {% endif %}
],

// The name of the data record attribute that contains x-values.
xkey: 'd',
xLabelFormat: function (d) {
    return ("0" + d.getDate()).slice(-2) + '-' + ("0" + (d.getMonth() + 1)).slice(-2) + '-' + d.getFullYear();
},
// A list of names of data record attributes that contain y-values.
ykeys: ['male','female'],
labels: ['male','female']
});// Calender
$(function(){
  $("#lto").datepicker({ dateFormat: 'dd-mm-yy' });
  $("#lfrom").datepicker({ dateFormat: 'dd-mm-yy' }).bind("change",function(){
    var minValue = $(this).val();
    minValue = $.datepicker.parseDate("dd-mm-yy", minValue);
    minValue.setDate(minValue.getDate()+1);
    $("#to").datepicker( "option", "minDate", minValue );
  })
});
///////////////////////////////////////// Pie Chart
anychart.onDocumentReady(function() {
var data = [
    {% if b['date']|length == b['male']|length == b['female']|length%}
            {% for i in range(b['date']|length) %} 
      {x: "male", value: '{{b['male'][i]}}'},
      {x: "female", value: '{{b['female'][i]}}'},
      {% endfor %}
      {% endif %}
];

var chart = anychart.pie();

chart.data(data);
chart.container('container');
chart.draw();
});
///////////////////////////////////////////////// Age Pie Chart
anychart.onDocumentReady(function() {
  var data = [
      {% if c['age_count']|length == c['age_range']|length%}
              {% for i in range(c['age_range']|length) %} 
        {x: '{{c['age_range'][i]}}', value: '{{c['age_count'][i]}}'},
        {% endfor %}
        {% endif %}
  ];

  var chart = anychart.pie();
  chart.data(data);

  chart.container('acontainer');
  chart.draw();
});
////NavBar
function w3_open() {
  document.getElementById("main").style.marginLeft = "180px";
  document.getElementById("mySidebar").style.width = "180px";
  document.getElementById("mySidebar").style.display = "block";
  document.getElementById("openNav").style.display = 'none';
}
function w3_close() {
  document.getElementById("main").style.marginLeft = "0";
  document.getElementById("mySidebar").style.display = "none";
  document.getElementById("openNav").style.display = "inline-block";
}

</script>
